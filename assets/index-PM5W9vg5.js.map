{"version":3,"file":"index-PM5W9vg5.js","sources":["../../src/utils/constants.ts","../../src/core/GameState.ts","../../src/core/EventManager.ts","../../src/services/AudioService.ts","../../src/services/FirebaseService.ts","../../src/services/StorageService.ts","../../src/utils/helpers.ts","../../src/entities/Visitor.ts","../../src/entities/Hotel.ts","../../src/ui/HUD.ts","../../src/ui/Menu.ts","../../src/ui/Instructions.ts","../../src/ui/GameOver.ts","../../src/ui/Leaderboard.ts","../../src/ui/PauseMenu.ts","../../src/ui/Settings.ts","../../src/utils/particles.ts","../../src/core/Game.ts","../../src/main.ts"],"sourcesContent":["import type { GameConfig } from '@/types';\n\nexport const GAME_CONFIG: GameConfig = {\n  initialHealth: 5,\n  visitorSpawnInterval: 7000,\n  visitorLifetime: 5000,\n  darkModeInterval: 40000,\n  darkModeDuration: 20000,\n};\n\nexport const VISITOR_SPAWN_COUNT = 8;\n\nexport const VISITOR_IMAGES: Record<string, string> = {\n  elf: '/images/elf.png',\n  human: '/images/human.png',\n  org: '/images/org.png',\n  goblin: '/images/goblin.png',\n  gandalf: '/images/gandalf.png',\n  sauron: '/images/sauron.png',\n  ring: '/images/ring.png',\n  gollum: '/images/gollum.png',\n  heart: '/images/heart.png',\n};\n\nexport const HOTEL_IMAGES = {\n  hotel1: '/images/hotel1.png',\n  hotel2: '/images/hotel2.png',\n  hotel3: '/images/hotel3.png',\n  hotel4: '/images/hotel4.png',\n};\n\nexport const AUDIO_FILES = {\n  background: '/sounds/lotr.mp3',\n  bad: '/sounds/bad-sound.mp3',\n  good: '/sounds/good-sound.mp3',\n  gollum: '/sounds/gollum-sound.mp3',\n  gandalf: '/sounds/gandalf-sound.mp3',\n  sauron: '/sounds/sauron-sound.mp3',\n  ring: '/sounds/ring-sound.mp3',\n};\n\nexport const SCORE_VALUES = {\n  goodVisitor: 10,\n  badVisitor: -10,\n  specialCharacter: 100,\n  specialCharacterPenalty: -20,\n};\n\nexport const HEALTH_VALUES = {\n  badVisitor: -1,\n  specialCharacter: -2,\n};\n\nexport const KEYBOARD_CONTROLS = {\n  PAUSE: ' ',\n  ESCAPE: 'Escape',\n  RESTART: 'r',\n  MUTE: 'm',\n};\n","import type { GameState, GameSide, VisitorCounts } from '@/types';\nimport { GAME_CONFIG } from '@/utils/constants';\n\nexport class GameStateManager {\n  private state: GameState = 'menu';\n  private score: number = 0;\n  private health: number = GAME_CONFIG.initialHealth;\n  private userName: string = '';\n  private hasRing: boolean = false;\n  private currentSide: GameSide = 'good';\n  private isDarkMode: boolean = false;\n  private visitorCounts: VisitorCounts = {\n    elf: 0,\n    human: 0,\n    org: 0,\n    goblin: 0,\n  };\n  private goodWins: string[] = [];\n  private darkWins: string[] = [];\n\n  getState(): GameState {\n    return this.state;\n  }\n\n  setState(state: GameState): void {\n    this.state = state;\n  }\n\n  getScore(): number {\n    return this.score;\n  }\n\n  addScore(points: number): void {\n    this.score += points;\n  }\n\n  getHealth(): number {\n    return this.health;\n  }\n\n  setHealth(health: number): void {\n    this.health = Math.max(0, health);\n  }\n\n  addHealth(amount: number): void {\n    this.health = Math.max(0, this.health + amount);\n  }\n\n  getUserName(): string {\n    return this.userName;\n  }\n\n  setUserName(name: string): void {\n    this.userName = name.trim().toUpperCase();\n  }\n\n  hasTheRing(): boolean {\n    return this.hasRing;\n  }\n\n  setRing(has: boolean): void {\n    this.hasRing = has;\n  }\n\n  getCurrentSide(): GameSide {\n    return this.currentSide;\n  }\n\n  setCurrentSide(side: GameSide): void {\n    this.currentSide = side;\n  }\n\n  isDarkModeActive(): boolean {\n    return this.isDarkMode;\n  }\n\n  setDarkMode(active: boolean): void {\n    this.isDarkMode = active;\n    this.currentSide = active ? 'evil' : 'good';\n  }\n\n  getVisitorCounts(): VisitorCounts {\n    return { ...this.visitorCounts };\n  }\n\n  incrementVisitorCount(type: keyof VisitorCounts): void {\n    this.visitorCounts[type]++;\n  }\n\n  getGoodWins(): string[] {\n    return [...this.goodWins];\n  }\n\n  addGoodWin(item: string): void {\n    this.goodWins.push(item);\n  }\n\n  removeGoodWin(item: string): void {\n    const index = this.goodWins.indexOf(item);\n    if (index > -1) {\n      this.goodWins.splice(index, 1);\n    }\n  }\n\n  getDarkWins(): string[] {\n    return [...this.darkWins];\n  }\n\n  addDarkWin(item: string): void {\n    this.darkWins.push(item);\n  }\n\n  removeDarkWin(item: string): void {\n    const index = this.darkWins.indexOf(item);\n    if (index > -1) {\n      this.darkWins.splice(index, 1);\n    }\n  }\n\n  reset(): void {\n    this.state = 'menu';\n    this.score = 0;\n    this.health = GAME_CONFIG.initialHealth;\n    this.userName = '';\n    this.hasRing = false;\n    this.currentSide = 'good';\n    this.isDarkMode = false;\n    this.visitorCounts = { elf: 0, human: 0, org: 0, goblin: 0 };\n    this.goodWins = [];\n    this.darkWins = [];\n  }\n}\n","type EventCallback = (...args: unknown[]) => void;\n\nexport class EventManager {\n  private events: Map<string, EventCallback[]> = new Map();\n\n  on(event: string, callback: EventCallback): void {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n    this.events.get(event)!.push(callback);\n  }\n\n  off(event: string, callback: EventCallback): void {\n    const callbacks = this.events.get(event);\n    if (callbacks) {\n      const index = callbacks.indexOf(callback);\n      if (index > -1) {\n        callbacks.splice(index, 1);\n      }\n    }\n  }\n\n  emit(event: string, ...args: unknown[]): void {\n    const callbacks = this.events.get(event);\n    if (callbacks) {\n      callbacks.forEach((callback) => callback(...args));\n    }\n  }\n\n  clear(): void {\n    this.events.clear();\n  }\n}\n","import { AUDIO_FILES } from '@/utils/constants';\nimport type { AudioConfig } from '@/types';\n\nexport class AudioService {\n  private audioElements: Map<string, HTMLAudioElement> = new Map();\n  private config: AudioConfig = {\n    backgroundVolume: 0.3,\n    effectsVolume: 1.0,\n    muted: false,\n  };\n\n  constructor() {\n    this.initializeAudio();\n  }\n\n  private initializeAudio(): void {\n    Object.entries(AUDIO_FILES).forEach(([key, src]) => {\n      const audio = new Audio(src);\n      if (key === 'background') {\n        audio.loop = true;\n        audio.volume = this.config.backgroundVolume;\n      } else {\n        audio.volume = this.config.effectsVolume;\n      }\n      this.audioElements.set(key, audio);\n    });\n  }\n\n  async play(soundName: keyof typeof AUDIO_FILES): Promise<void> {\n    if (this.config.muted) return;\n\n    // Don't play sound effects if effectsVolume is 0 (disabled)\n    if (soundName !== 'background' && this.config.effectsVolume === 0) return;\n\n    const audio = this.audioElements.get(soundName);\n    if (audio) {\n      try {\n        audio.currentTime = 0;\n        await audio.play();\n      } catch (error) {\n        console.warn(\n          `Audio playback failed for ${soundName}. User interaction may be required.`,\n          error\n        );\n        if (soundName === 'background') {\n          document.addEventListener(\n            'click',\n            () => {\n              audio.play().catch(() => {});\n            },\n            { once: true }\n          );\n        }\n      }\n    }\n  }\n\n  stop(soundName: keyof typeof AUDIO_FILES): void {\n    const audio = this.audioElements.get(soundName);\n    if (audio) {\n      audio.pause();\n      audio.currentTime = 0;\n    }\n  }\n\n  setVolume(soundName: keyof typeof AUDIO_FILES, volume: number): void {\n    const audio = this.audioElements.get(soundName);\n    if (audio) {\n      audio.volume = Math.max(0, Math.min(1, volume));\n    }\n  }\n\n  setBackgroundVolume(volume: number): void {\n    this.config.backgroundVolume = Math.max(0, Math.min(1, volume));\n    const bgAudio = this.audioElements.get('background');\n    if (bgAudio) {\n      bgAudio.volume = this.config.backgroundVolume;\n    }\n  }\n\n  setEffectsVolume(volume: number): void {\n    this.config.effectsVolume = Math.max(0, Math.min(1, volume));\n    this.audioElements.forEach((audio, key) => {\n      if (key !== 'background') {\n        audio.volume = this.config.effectsVolume;\n      }\n    });\n  }\n\n  mute(): void {\n    this.config.muted = true;\n    this.audioElements.forEach((audio) => audio.pause());\n  }\n\n  unmute(): void {\n    this.config.muted = false;\n  }\n\n  toggleMute(): boolean {\n    this.config.muted = !this.config.muted;\n    if (this.config.muted) {\n      this.audioElements.forEach((audio) => audio.pause());\n    }\n    return this.config.muted;\n  }\n\n  isMuted(): boolean {\n    return this.config.muted;\n  }\n\n  setEffectsEnabled(enabled: boolean): void {\n    if (!enabled) {\n      this.audioElements.forEach((audio, key) => {\n        if (key !== 'background') {\n          audio.pause();\n          audio.currentTime = 0;\n        }\n      });\n    }\n    this.config.effectsVolume = enabled ? 1.0 : 0;\n  }\n\n  getConfig(): AudioConfig {\n    return { ...this.config };\n  }\n\n  updateConfig(config: Partial<AudioConfig>): void {\n    this.config = { ...this.config, ...config };\n    if (config.backgroundVolume !== undefined) {\n      this.setBackgroundVolume(config.backgroundVolume);\n    }\n    if (config.effectsVolume !== undefined) {\n      this.setEffectsVolume(config.effectsVolume);\n    }\n  }\n\n  cleanup(): void {\n    this.audioElements.forEach((audio) => {\n      audio.pause();\n      audio.src = '';\n    });\n    this.audioElements.clear();\n  }\n}\n","import { initializeApp, FirebaseApp } from 'firebase/app';\nimport {\n  getFirestore,\n  collection,\n  addDoc,\n  query,\n  orderBy,\n  limit,\n  getDocs,\n  Firestore,\n} from 'firebase/firestore';\nimport type { PlayerScore } from '@/types';\n\nexport class FirebaseService {\n  private app: FirebaseApp | null = null;\n  private db: Firestore | null = null;\n  private initialized = false;\n\n  constructor() {\n    this.initialize();\n  }\n\n  private initialize(): void {\n    try {\n      const firebaseConfig = {\n        apiKey: import.meta.env.VITE_FIREBASE_API_KEY,\n        authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,\n        projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,\n        storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,\n        messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\n        appId: import.meta.env.VITE_FIREBASE_APP_ID,\n      };\n\n      if (!firebaseConfig.apiKey || !firebaseConfig.projectId) {\n        console.warn('Firebase configuration is missing. Leaderboard features will be disabled.');\n        return;\n      }\n\n      this.app = initializeApp(firebaseConfig);\n      this.db = getFirestore(this.app);\n      this.initialized = true;\n    } catch (error) {\n      console.error('Failed to initialize Firebase:', error);\n    }\n  }\n\n  async saveScore(playerScore: PlayerScore): Promise<boolean> {\n    if (!this.initialized || !this.db) {\n      console.warn('Firebase not initialized. Score not saved.');\n      return false;\n    }\n\n    if (!playerScore.userName || playerScore.userName.trim() === '') {\n      console.error('Invalid username. Score not saved.');\n      return false;\n    }\n\n    try {\n      const scoreData = {\n        userName: playerScore.userName,\n        score: playerScore.score,\n        timestamp: Date.now(),\n      };\n\n      await addDoc(collection(this.db, 'users'), scoreData);\n      return true;\n    } catch (error) {\n      console.error('Error saving score:', error);\n      return false;\n    }\n  }\n\n  async getTopScores(topN: number = 10): Promise<PlayerScore[]> {\n    if (!this.initialized || !this.db) {\n      console.warn('Firebase not initialized. Cannot fetch scores.');\n      return [];\n    }\n\n    try {\n      const scoresQuery = query(\n        collection(this.db, 'users'),\n        orderBy('score', 'desc'),\n        limit(topN)\n      );\n\n      const querySnapshot = await getDocs(scoresQuery);\n      const scores: PlayerScore[] = [];\n\n      querySnapshot.forEach((doc) => {\n        const data = doc.data() as { userName: string; score: number; timestamp?: number };\n        scores.push({\n          userName: data.userName,\n          score: data.score,\n          timestamp: data.timestamp,\n        });\n      });\n\n      return scores;\n    } catch (error) {\n      console.error('Error fetching top scores:', error);\n      return [];\n    }\n  }\n\n  isInitialized(): boolean {\n    return this.initialized;\n  }\n}\n","import type { GameSettings } from '@/types';\n\nconst STORAGE_KEYS = {\n  SETTINGS: 'hme_settings',\n  HIGH_SCORE: 'hme_high_score',\n  TUTORIAL_SHOWN: 'hme_tutorial_shown',\n} as const;\n\nexport class StorageService {\n  private isAvailable: boolean;\n\n  constructor() {\n    this.isAvailable = this.checkStorageAvailability();\n  }\n\n  private checkStorageAvailability(): boolean {\n    try {\n      const test = '__storage_test__';\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  saveSettings(settings: GameSettings): void {\n    if (!this.isAvailable) return;\n    try {\n      localStorage.setItem(STORAGE_KEYS.SETTINGS, JSON.stringify(settings));\n    } catch (error) {\n      console.error('Failed to save settings:', error);\n    }\n  }\n\n  loadSettings(): GameSettings | null {\n    if (!this.isAvailable) return null;\n    try {\n      const data = localStorage.getItem(STORAGE_KEYS.SETTINGS);\n      return data ? JSON.parse(data) : null;\n    } catch (error) {\n      console.error('Failed to load settings:', error);\n      return null;\n    }\n  }\n\n  saveHighScore(score: number): void {\n    if (!this.isAvailable) return;\n    try {\n      const currentHigh = this.loadHighScore();\n      if (score > currentHigh) {\n        localStorage.setItem(STORAGE_KEYS.HIGH_SCORE, score.toString());\n      }\n    } catch (error) {\n      console.error('Failed to save high score:', error);\n    }\n  }\n\n  loadHighScore(): number {\n    if (!this.isAvailable) return 0;\n    try {\n      const score = localStorage.getItem(STORAGE_KEYS.HIGH_SCORE);\n      return score ? parseInt(score, 10) : 0;\n    } catch (error) {\n      console.error('Failed to load high score:', error);\n      return 0;\n    }\n  }\n\n  setTutorialShown(shown: boolean): void {\n    if (!this.isAvailable) return;\n    try {\n      localStorage.setItem(STORAGE_KEYS.TUTORIAL_SHOWN, shown.toString());\n    } catch (error) {\n      console.error('Failed to save tutorial status:', error);\n    }\n  }\n\n  isTutorialShown(): boolean {\n    if (!this.isAvailable) return false;\n    try {\n      return localStorage.getItem(STORAGE_KEYS.TUTORIAL_SHOWN) === 'true';\n    } catch (error) {\n      console.error('Failed to load tutorial status:', error);\n      return false;\n    }\n  }\n\n  clear(): void {\n    if (!this.isAvailable) return;\n    try {\n      Object.values(STORAGE_KEYS).forEach((key) => {\n        localStorage.removeItem(key);\n      });\n    } catch (error) {\n      console.error('Failed to clear storage:', error);\n    }\n  }\n}\n","export function randomInt(min: number, max: number): number {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function randomFloat(min: number, max: number): number {\n  return Math.random() * (max - min) + min;\n}\n\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function debounce<T extends (...args: unknown[]) => void>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  return function (this: unknown, ...args: Parameters<T>) {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(this, args), wait);\n  };\n}\n\nexport function throttle<T extends (...args: unknown[]) => void>(\n  func: T,\n  limit: number\n): (...args: Parameters<T>) => void {\n  let inThrottle: boolean;\n  return function (this: unknown, ...args: Parameters<T>) {\n    if (!inThrottle) {\n      func.apply(this, args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n}\n\nexport function createElement<K extends keyof HTMLElementTagNameMap>(\n  tag: K,\n  options?: {\n    id?: string;\n    className?: string;\n    textContent?: string;\n    innerHTML?: string;\n    attributes?: Record<string, string>;\n    styles?: Partial<CSSStyleDeclaration>;\n  }\n): HTMLElementTagNameMap[K] {\n  const element = document.createElement(tag);\n\n  if (options?.id) element.id = options.id;\n  if (options?.className) element.className = options.className;\n  if (options?.textContent) element.textContent = options.textContent;\n  if (options?.innerHTML) element.innerHTML = options.innerHTML;\n\n  if (options?.attributes) {\n    Object.entries(options.attributes).forEach(([key, value]) => {\n      element.setAttribute(key, value);\n    });\n  }\n\n  if (options?.styles) {\n    Object.assign(element.style, options.styles);\n  }\n\n  return element;\n}\n\nexport function isMobileDevice(): boolean {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  );\n}\n\nexport function isFullscreenSupported(): boolean {\n  return !!(\n    document.fullscreenEnabled ||\n    (document as any).webkitFullscreenEnabled ||\n    (document as any).mozFullScreenEnabled ||\n    (document as any).msFullscreenEnabled\n  );\n}\n\nexport function requestFullscreen(element: HTMLElement): Promise<void> {\n  if (element.requestFullscreen) {\n    return element.requestFullscreen();\n  } else if ((element as any).webkitRequestFullscreen) {\n    return (element as any).webkitRequestFullscreen();\n  } else if ((element as any).mozRequestFullScreen) {\n    return (element as any).mozRequestFullScreen();\n  } else if ((element as any).msRequestFullscreen) {\n    return (element as any).msRequestFullscreen();\n  }\n  return Promise.reject(new Error('Fullscreen not supported'));\n}\n\nexport function exitFullscreen(): Promise<void> {\n  if (document.exitFullscreen) {\n    return document.exitFullscreen();\n  } else if ((document as any).webkitExitFullscreen) {\n    return (document as any).webkitExitFullscreen();\n  } else if ((document as any).mozCancelFullScreen) {\n    return (document as any).mozCancelFullScreen();\n  } else if ((document as any).msExitFullscreen) {\n    return (document as any).msExitFullscreen();\n  }\n  return Promise.reject(new Error('Exit fullscreen not supported'));\n}\n","import { randomInt } from '@/utils/helpers';\nimport { VISITOR_IMAGES } from '@/utils/constants';\nimport type { VisitorType, Position } from '@/types';\n\nexport class Visitor {\n  type: VisitorType;\n  position: Position;\n  domElement: HTMLImageElement;\n  private targetPosition: Position = { x: 0, y: 0 };\n  private animationFrameId: number | null = null;\n  private hasRing: boolean;\n\n  constructor(hasRing: boolean = false) {\n    this.hasRing = hasRing;\n    this.position = {\n      x: randomInt(10, 80),\n      y: randomInt(25, 75),\n    };\n    this.type = this.determineType();\n    this.domElement = this.createDomElement();\n  }\n\n  private determineType(): VisitorType {\n    const randomUniqueNumber = randomInt(1, 100);\n\n    // Ring: 3% chance (1-3 out of 100)\n    if (randomUniqueNumber <= 3 && !this.hasRing) {\n      return 'ring';\n    }\n\n    // Sauron: 3% chance (4-6 out of 100)\n    if (randomUniqueNumber >= 4 && randomUniqueNumber <= 6) {\n      return 'sauron';\n    }\n\n    // Gandalf: 3% chance (7-9 out of 100)\n    if (randomUniqueNumber >= 7 && randomUniqueNumber <= 9) {\n      return 'gandalf';\n    }\n\n    // Gollum: 20% chance (10-29 out of 100)\n    if (randomUniqueNumber >= 10 && randomUniqueNumber <= 29) {\n      return 'gollum';\n    }\n\n    // Regular visitors: 71% chance (30-100 out of 100)\n    const randomNumber = randomInt(1, 4);\n    const types: VisitorType[] = ['elf', 'human', 'org', 'goblin'];\n    return types[randomNumber - 1];\n  }\n\n  private createDomElement(): HTMLImageElement {\n    const img = document.createElement('img');\n    img.id = 'visitor';\n    img.className = this.type;\n    img.src = VISITOR_IMAGES[this.type];\n    img.style.position = 'absolute';\n    img.style.left = `${this.position.x}vw`;\n    img.style.bottom = `${this.position.y}vh`;\n    img.style.transition = 'all 0.3s ease-out';\n    img.style.cursor = 'pointer';\n    img.setAttribute('role', 'button');\n    img.setAttribute('aria-label', `${this.type} visitor`);\n    img.setAttribute('tabindex', '0');\n\n    return img;\n  }\n\n  setTargetPosition(isDarkMode: boolean): void {\n    const positions: Record<VisitorType, { good: Position; evil: Position }> = {\n      human: { good: { x: 55, y: 0 }, evil: { x: 0, y: 0 } },\n      elf: { good: { x: 88, y: 0 }, evil: { x: 22, y: 0 } },\n      goblin: { good: { x: 55, y: 0 }, evil: { x: 0, y: 0 } },\n      org: { good: { x: 88, y: 0 }, evil: { x: 25, y: 0 } },\n      sauron: { good: { x: 25, y: 0 }, evil: { x: 25, y: 0 } },\n      gandalf: { good: { x: 55, y: 0 }, evil: { x: 55, y: 0 } },\n      ring: { good: { x: 58, y: 5 }, evil: { x: 28, y: 5 } },\n      gollum: { good: { x: 55, y: 0 }, evil: { x: 25, y: 0 } },\n    };\n\n    this.targetPosition = isDarkMode ? positions[this.type].evil : positions[this.type].good;\n  }\n\n  startMoving(isDarkMode: boolean): void {\n    this.setTargetPosition(isDarkMode);\n\n    const animate = () => {\n      const speed = 0.5;\n      const dx = this.targetPosition.x - this.position.x;\n      const dy = this.targetPosition.y - this.position.y;\n\n      if (Math.abs(dx) > 0.1 || Math.abs(dy) > 0.1) {\n        this.position.x += dx * speed * 0.02;\n        this.position.y += dy * speed * 0.02;\n\n        this.domElement.style.left = `${this.position.x}vw`;\n        this.domElement.style.bottom = `${this.position.y}vh`;\n\n        this.animationFrameId = requestAnimationFrame(animate);\n      }\n    };\n\n    this.animationFrameId = requestAnimationFrame(animate);\n  }\n\n  stopMoving(): void {\n    if (this.animationFrameId !== null) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n  }\n\n  destroy(): void {\n    this.stopMoving();\n    if (this.domElement.parentElement) {\n      this.domElement.remove();\n    }\n  }\n}\n","import { HOTEL_IMAGES } from '@/utils/constants';\n\nexport class Hotel {\n  private containerElement: HTMLDivElement;\n\n  constructor(parentElement: HTMLElement) {\n    this.containerElement = this.createContainer();\n    parentElement.appendChild(this.containerElement);\n    this.createHotels();\n  }\n\n  private createContainer(): HTMLDivElement {\n    const container = document.createElement('div');\n    container.id = 'hotel-container';\n    container.style.position = 'absolute';\n    container.style.width = '100vw';\n    container.style.height = '20vh';\n    container.style.bottom = '0';\n    return container;\n  }\n\n  private createHotels(): void {\n    const hotelPositions = [\n      { id: 'hotel1', left: '0' },\n      { id: 'hotel2', left: '25vw' },\n      { id: 'hotel3', left: '50vw' },\n      { id: 'hotel4', right: '0vw' },\n    ];\n\n    hotelPositions.forEach(({ id, left, right }) => {\n      const img = document.createElement('img');\n      img.id = id;\n      img.src = HOTEL_IMAGES[id as keyof typeof HOTEL_IMAGES];\n      img.style.position = 'absolute';\n      img.style.height = '20vh';\n      img.style.width = 'auto';\n      img.setAttribute('alt', `${id} building`);\n      \n      if (left) {\n        img.style.left = left;\n      } else if (right) {\n        img.style.right = right;\n      }\n\n      this.containerElement.appendChild(img);\n    });\n  }\n\n  destroy(): void {\n    if (this.containerElement.parentElement) {\n      this.containerElement.remove();\n    }\n  }\n}\n","import { createElement } from '@/utils/helpers';\nimport { VISITOR_IMAGES } from '@/utils/constants';\n\nexport class HUD {\n  private scoreDisplay: HTMLSpanElement;\n  private healthDisplay: HTMLSpanElement;\n  private ringDisplay: HTMLSpanElement;\n  private parentElement: HTMLElement;\n\n  constructor(parentElement: HTMLElement) {\n    this.parentElement = parentElement;\n    this.scoreDisplay = this.createScoreDisplay();\n    this.healthDisplay = this.createHealthDisplay();\n    this.ringDisplay = this.createRingDisplay();\n  }\n\n  private createScoreDisplay(): HTMLSpanElement {\n    const display = createElement('span', {\n      id: 'scoreDisplay',\n      textContent: 'Score: 0',\n      styles: {\n        color: '#fff',\n        position: 'absolute',\n        right: '1vw',\n        fontSize: '1.5vw',\n        textAlign: 'center',\n        top: '1vh',\n      },\n    });\n    this.parentElement.appendChild(display);\n    return display;\n  }\n\n  private createHealthDisplay(): HTMLSpanElement {\n    const display = createElement('span', {\n      id: 'healthDisplay',\n      styles: {\n        marginLeft: '1vw',\n        color: '#fff',\n        textAlign: 'center',\n        fontSize: '2vw',\n        position: 'absolute',\n        top: '1vh',\n        left: '0',\n      },\n    });\n    this.parentElement.appendChild(display);\n    return display;\n  }\n\n  private createRingDisplay(): HTMLSpanElement {\n    const display = createElement('span', {\n      id: 'ringDisplay',\n      styles: {\n        position: 'absolute',\n        top: '1vh',\n        left: '50vw',\n        transform: 'translateX(-50%)',\n      },\n    });\n    this.parentElement.appendChild(display);\n    return display;\n  }\n\n  updateScore(score: number): void {\n    this.scoreDisplay.textContent = `Score: ${score}`;\n  }\n\n  updateHealth(health: number): void {\n    const heartImg = createElement('img', {\n      id: 'heart-image',\n      attributes: {\n        src: VISITOR_IMAGES.heart,\n        alt: 'health indicator',\n      },\n      styles: {\n        width: 'auto',\n        height: '3vh',\n        marginTop: '1vh',\n      },\n    });\n\n    this.healthDisplay.innerHTML = '';\n    this.healthDisplay.appendChild(heartImg);\n    this.healthDisplay.appendChild(document.createTextNode(` ${health}`));\n  }\n\n  updateRing(hasRing: boolean, _isDarkMode: boolean, onClick?: () => void): void {\n    this.ringDisplay.innerHTML = '';\n\n    if (hasRing) {\n      const ringImg = createElement('img', {\n        id: 'ring-image',\n        attributes: {\n          src: VISITOR_IMAGES.ring,\n          alt: 'the one ring',\n          role: 'button',\n          tabindex: '0',\n        },\n        styles: {\n          width: '2vw',\n          height: 'auto',\n          cursor: 'pointer',\n          paddingTop: '1vh',\n        },\n      });\n\n      if (onClick) {\n        ringImg.addEventListener('click', onClick);\n        ringImg.addEventListener('keydown', (e) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            onClick();\n          }\n        });\n      }\n\n      this.ringDisplay.appendChild(ringImg);\n    }\n  }\n\n  showInfo(message: string, duration: number = 2000): void {\n    const info = createElement('p', {\n      id: 'info-text',\n      innerHTML: message,\n    });\n\n    this.parentElement.appendChild(info);\n\n    setTimeout(() => {\n      if (info.parentElement) {\n        info.remove();\n      }\n    }, duration);\n  }\n\n  destroy(): void {\n    this.scoreDisplay.remove();\n    this.healthDisplay.remove();\n    this.ringDisplay.remove();\n  }\n}\n","import { createElement, requestFullscreen } from '@/utils/helpers';\n\nexport class Menu {\n  private parentElement: HTMLElement;\n  private onStart?: (userName: string) => void;\n  private onInstructions?: () => void;\n  private onShowLeaderboard?: () => void;\n\n  constructor(\n    parentElement: HTMLElement,\n    callbacks: {\n      onStart?: (userName: string) => void;\n      onInstructions?: () => void;\n      onShowLeaderboard?: () => void;\n    }\n  ) {\n    this.parentElement = parentElement;\n    this.onStart = callbacks.onStart;\n    this.onInstructions = callbacks.onInstructions;\n    this.onShowLeaderboard = callbacks.onShowLeaderboard;\n  }\n\n  show(): void {\n    const form = createElement('form', {\n      id: 'nameForm',\n      innerHTML: `\n        <label for=\"nameInput\" id=\"title\">Hotel Middle Earth</label>\n        <div class=\"menu-input-section\">\n          <input type=\"text\" id=\"nameInput\" placeholder=\"Please enter your name\" required>\n          <input id=\"submit-btn\" type=\"submit\" class=\"submit-btn\" value=\"Start Game\">\n        </div>\n        <div class=\"menu-buttons\">\n          <button type=\"button\" id=\"instructions-button\">Instructions</button>\n          <button type=\"button\" id=\"top-scores-button\">Top Scores</button>\n        </div>\n        <div class=\"menu-social-links\">\n          <a href=\"https://utkucikmaz.com\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"social-link\">\n            <img src=\"/images/logo/logo.png\" alt=\"Website\" class=\"social-icon\">\n            <span>Website</span>\n          </a>\n          <a href=\"https://github.com/utkucikmaz/Hotel-Middle-Earth\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"social-link\">\n            <img src=\"/images/logo/github-icon.svg\" alt=\"GitHub\" class=\"social-icon\">\n            <span>GitHub</span>\n          </a>\n          <a href=\"https://www.linkedin.com/in/utkucikmaz\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"social-link\">\n            <img src=\"/images/logo/linkedin-icon.svg\" alt=\"LinkedIn\" class=\"social-icon\">\n            <span>LinkedIn</span>\n          </a>\n        </div>\n      `,\n    });\n\n    this.parentElement.innerHTML = '';\n    this.parentElement.appendChild(form);\n\n    const instructionsButton = document.getElementById('instructions-button');\n    if (instructionsButton) {\n      instructionsButton.addEventListener('click', (e) => {\n        e.preventDefault();\n        if (this.onInstructions) {\n          this.onInstructions();\n        }\n      });\n    }\n\n    const topScoresButton = document.getElementById('top-scores-button');\n    if (topScoresButton) {\n      topScoresButton.addEventListener('click', (e) => {\n        e.preventDefault();\n        if (this.onShowLeaderboard) {\n          this.onShowLeaderboard();\n        }\n      });\n    }\n\n    form.addEventListener('submit', async (event) => {\n      event.preventDefault();\n      const nameInput = document.getElementById('nameInput') as HTMLInputElement;\n      const userName = nameInput.value.trim();\n\n      if (userName === '') {\n        alert('Please enter a valid name.');\n        return;\n      }\n\n      try {\n        await requestFullscreen(this.parentElement);\n      } catch (error) {\n        console.warn('Fullscreen not available:', error);\n      }\n\n      if (this.onStart) {\n        this.onStart(userName);\n      }\n    });\n  }\n\n  hide(): void {\n    const form = document.getElementById('nameForm');\n    if (form) {\n      form.style.display = 'none';\n    }\n  }\n}\n","import { createElement } from '@/utils/helpers';\n\nexport class Instructions {\n  private parentElement: HTMLElement;\n  private onBack?: () => void;\n\n  constructor(parentElement: HTMLElement, callbacks: { onBack?: () => void }) {\n    this.parentElement = parentElement;\n    this.onBack = callbacks.onBack;\n  }\n\n  show(): void {\n    const container = createElement('div', {\n      id: 'instructionsContainer',\n      innerHTML: `\n        <h1 id=\"instruction-title\">Welcome to the Hotel Middle Earth!</h1>\n        <div id=\"backbutton-container\">\n          <button id=\"backButton\">Back</button>\n        </div>\n        <br/>\n        <ul id=\"instruction-list\">\n          <div id=\"inst-good\">\n            <li>In this background collect <img src=\"./images/elf.png\" class=\"inst-char\"> and <img src=\"./images/human.png\" class=\"inst-char\"> to score points.</li>\n            <li>Avoid <img src=\"./images/org.png\" class=\"inst-char\"> and <img src=\"./images/goblin.png\" class=\"inst-char\"> to maintain your health.</li>\n            <li>Be careful about the <img src=\"./images/gollum.png\" class=\"inst-char\" id=\"gollum-inst\"> if you have the <img src=\"./images/ring.png\" class=\"inst-char\" id=\"ring-inst\">, he is a filthy thief.</li>\n            <li>If you serve <img src=\"./images/sauron.png\" class=\"inst-char\"> you lose double health and score.</li>\n            <li>If you lose all your health before you destroy the ring, the game is over.</li>\n            <li>If you find both <img src=\"./images/ring.png\" class=\"inst-char\" id=\"ring-inst\"> and <img src=\"./images/gandalf.png\" class=\"inst-char\">, <img src=\"./images/hotel3.png\" class=\"inst-char\"> wins!</li>\n          </div>\n          <div id=\"inst-bad\">\n            <li>Eye mode will activate periodically, be cautious!</li>\n            <li>Now you must obey <img src=\"./images/sauron.png\" class=\"inst-char\"> and collect <img src=\"./images/org.png\" class=\"inst-char\"> and <img src=\"./images/goblin.png\" class=\"inst-char\">.</li>\n            <li>Even though you serve <img src=\"./images/sauron.png\" class=\"inst-char\">, <img src=\"./images/gollum.png\" class=\"inst-char\" id=\"gollum-inst\"> is still a thief.</li>\n            <li>If you serve <img src=\"./images/gandalf.png\" class=\"inst-char\"> you lose double health and score.</li>\n            <li>If you lose all your health before you destroy the ring, the game is over.</li>\n            <li>If you find both <img src=\"./images/ring.png\" class=\"inst-char\" id=\"ring-inst\"> and <img src=\"./images/sauron.png\" class=\"inst-char\">, <img src=\"./images/hotel2.png\" class=\"inst-char\"> wins!</li>\n          </div>\n        </ul>\n      `,\n    });\n\n    this.parentElement.innerHTML = '';\n    this.parentElement.appendChild(container);\n\n    const backButton = container.querySelector('#backButton') as HTMLButtonElement;\n    if (backButton && this.onBack) {\n      backButton.addEventListener('click', this.onBack);\n    }\n  }\n\n  hide(): void {\n    const container = document.getElementById('instructionsContainer');\n    if (container) {\n      container.remove();\n    }\n  }\n}\n","import { createElement } from '@/utils/helpers';\n\nexport type GameOverType = 'defeat' | 'gandalf' | 'sauron';\n\nexport class GameOver {\n  private parentElement: HTMLElement;\n  private onRestart?: () => void;\n  private onShowLeaderboard?: () => void;\n\n  constructor(\n    parentElement: HTMLElement,\n    callbacks: {\n      onRestart?: () => void;\n      onShowLeaderboard?: () => void;\n    }\n  ) {\n    this.parentElement = parentElement;\n    this.onRestart = callbacks.onRestart;\n    this.onShowLeaderboard = callbacks.onShowLeaderboard;\n  }\n\n  show(type: GameOverType, userName: string, score: number): void {\n    this.parentElement.innerHTML = '';\n\n    let container: HTMLElement;\n\n    if (type === 'defeat') {\n      container = this.createDefeatScreen(userName, score);\n    } else if (type === 'gandalf') {\n      container = this.createGandalfWinScreen(userName, score);\n    } else {\n      container = this.createSauronWinScreen(userName, score);\n    }\n\n    this.parentElement.appendChild(container);\n    this.setupEventListeners(container);\n  }\n\n  private createDefeatScreen(userName: string, score: number): HTMLElement {\n    const gameOverGif = createElement('img', {\n      className: 'over-gif',\n      attributes: {\n        src: './images/over.gif',\n        alt: \"ring couldn't be destroyed\",\n      },\n    });\n\n    const container = createElement('p', {\n      className: 'game-over',\n      id: 'game-over-id',\n      innerHTML: `\n        <p class=\"over-title\">${userName} couldn't destroy the ring.</p>\n        <p>I don't say it was ${userName}'s fault, but only ${score}?</p>\n        <p>Middle Earth needs better fighters</p>\n      `,\n    });\n\n    container.insertBefore(gameOverGif, container.firstChild);\n    this.addButtons(container);\n\n    return container;\n  }\n\n  private createGandalfWinScreen(userName: string, score: number): HTMLElement {\n    const gameOverGif = createElement('img', {\n      id: 'gandalf-won',\n      attributes: {\n        src: './images/gandalf-won.gif',\n        alt: 'a beautiful image of gandalf',\n      },\n    });\n\n    const container = createElement('p', {\n      className: 'gandalf-class',\n      id: 'game-over-id',\n      innerHTML: `\n        <p class=\"over-title\">Now Middle Earth is Free!!</p>\n        <div id=\"gandalf-info-container\">\n          <p>Gandalf has really come on time as he promised to Aragorn</p>\n          <p><i>\"Look to my coming on the first light of the fifth day, at dawn look to the east...\"</i></p>\n          <p>${userName} helped Gandalf and all his friends during the wars.</p>\n          <p>${userName} found ${score} soldiers and ran to the heart of the enemy.</p>\n        </div>\n      `,\n    });\n\n    container.insertBefore(gameOverGif, container.firstChild);\n    this.addButtons(container);\n\n    return container;\n  }\n\n  private createSauronWinScreen(userName: string, score: number): HTMLElement {\n    const gameOverGif = createElement('img', {\n      id: 'sauron-won',\n      attributes: {\n        src: './images/sauron-won.gif',\n        alt: 'a powerful image of sauron',\n      },\n    });\n\n    const container = createElement('p', {\n      className: 'sauron-class',\n      id: 'game-over-id',\n      innerHTML: `\n        <p class=\"over-title\">Sauron took the Middle Earth over.</p>\n        <div class=\"sauron-info-container\">\n          <p>Now everyone must obey the dark lord.</p>\n          <p>${userName} served Sauron loyally...</p>\n          <p>Sauron gave ${userName} ${score} soldiers to invade more!</p>\n          <br/>\n        </div>\n      `,\n    });\n\n    container.insertBefore(gameOverGif, container.firstChild);\n    this.addButtons(container);\n\n    return container;\n  }\n\n  private addButtons(container: HTMLElement): void {\n    const showPlayersButton = createElement('button', {\n      id: 'players-button',\n      textContent: 'Top Players',\n    });\n\n    const restartDiv = createElement('p', {\n      className: 'restart',\n      textContent: 'Press space to restart',\n    });\n\n    container.appendChild(showPlayersButton);\n    container.appendChild(restartDiv);\n  }\n\n  private setupEventListeners(container: HTMLElement): void {\n    const playersButton = container.querySelector('#players-button') as HTMLButtonElement;\n    if (playersButton && this.onShowLeaderboard) {\n      playersButton.addEventListener('click', this.onShowLeaderboard);\n    }\n\n    const handleKeyPress = (event: KeyboardEvent) => {\n      if (event.key === ' ' && this.onRestart) {\n        event.preventDefault();\n        document.removeEventListener('keydown', handleKeyPress);\n        this.onRestart();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyPress);\n  }\n\n  hide(): void {\n    const container = document.getElementById('game-over-id');\n    if (container) {\n      container.remove();\n    }\n  }\n}\n","import { createElement } from '@/utils/helpers';\nimport type { PlayerScore } from '@/types';\n\nexport class Leaderboard {\n  private parentElement: HTMLElement;\n  private onBack?: () => void;\n\n  constructor(parentElement: HTMLElement, callbacks: { onBack?: () => void }) {\n    this.parentElement = parentElement;\n    this.onBack = callbacks.onBack;\n  }\n\n  show(scores: PlayerScore[], onBackOverride?: () => void): void {\n    const container = createElement('div', {\n      id: 'topPlayersContainer',\n    });\n\n    const title = createElement('p', {\n      textContent: 'Top Players',\n      className: 'top-players-title',\n    });\n    container.appendChild(title);\n\n    const playerList = createElement('ol', {\n      className: 'player-list',\n    });\n\n    if (scores.length === 0) {\n      const emptyMessage = createElement('li', {\n        textContent: 'No scores yet. Be the first!',\n        styles: {\n          listStyle: 'none',\n        },\n      });\n      playerList.appendChild(emptyMessage);\n    } else {\n      scores.forEach((score) => {\n        const listItem = createElement('li', {\n          textContent: `${score.userName}: ${score.score}`,\n        });\n        playerList.appendChild(listItem);\n      });\n    }\n\n    container.appendChild(playerList);\n\n    const backButton = createElement('button', {\n      textContent: 'Back',\n      className: 'back-button',\n    });\n\n    const backHandler = onBackOverride ?? this.onBack;\n    if (backHandler) {\n      backButton.addEventListener('click', backHandler);\n    }\n\n    container.appendChild(backButton);\n\n    this.parentElement.innerHTML = '';\n    this.parentElement.appendChild(container);\n  }\n\n  hide(): void {\n    const container = document.getElementById('topPlayersContainer');\n    if (container) {\n      container.remove();\n    }\n  }\n}\n","import { createElement } from '@/utils/helpers';\n\nexport class PauseMenu {\n  private parentElement: HTMLElement;\n  private container: HTMLDivElement | null = null;\n  private onResume?: () => void;\n  private onRestart?: () => void;\n  private onSettings?: () => void;\n\n  constructor(\n    parentElement: HTMLElement,\n    callbacks: {\n      onResume?: () => void;\n      onRestart?: () => void;\n      onSettings?: () => void;\n    }\n  ) {\n    this.parentElement = parentElement;\n    this.onResume = callbacks.onResume;\n    this.onRestart = callbacks.onRestart;\n    this.onSettings = callbacks.onSettings;\n  }\n\n  show(): void {\n    if (this.container) return;\n\n    this.container = createElement('div', {\n      id: 'pauseMenu',\n      styles: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        backgroundColor: 'rgba(0, 0, 0, 0.9)',\n        padding: '3rem',\n        borderRadius: '1rem',\n        zIndex: '1000',\n        textAlign: 'center',\n        minWidth: '300px',\n      },\n    });\n\n    const title = createElement('h2', {\n      textContent: 'Game Paused',\n      styles: {\n        color: '#fff',\n        marginBottom: '2rem',\n        fontSize: '2rem',\n      },\n    });\n    this.container.appendChild(title);\n\n    const buttonStyle = {\n      display: 'block',\n      width: '100%',\n      padding: '1rem',\n      margin: '0.5rem 0',\n      fontSize: '1rem',\n      backgroundColor: 'transparent',\n      color: '#fff',\n      border: '2px solid #fff',\n      borderRadius: '5px',\n      cursor: 'pointer',\n    };\n\n    const resumeButton = createElement('button', {\n      textContent: 'Resume (Space)',\n      styles: buttonStyle,\n    });\n    resumeButton.addEventListener('click', () => this.onResume?.());\n    this.container.appendChild(resumeButton);\n\n    const restartButton = createElement('button', {\n      textContent: 'Restart (R)',\n      styles: buttonStyle,\n    });\n    restartButton.addEventListener('click', () => this.onRestart?.());\n    this.container.appendChild(restartButton);\n\n    const settingsButton = createElement('button', {\n      textContent: 'Settings',\n      styles: buttonStyle,\n    });\n    settingsButton.addEventListener('click', () => this.onSettings?.());\n    this.container.appendChild(settingsButton);\n\n    this.parentElement.appendChild(this.container);\n  }\n\n  hide(): void {\n    if (this.container) {\n      this.container.remove();\n      this.container = null;\n    }\n  }\n\n  isVisible(): boolean {\n    return this.container !== null;\n  }\n}\n","import { createElement } from '@/utils/helpers';\nimport { AudioService } from '@/services/AudioService';\n\nexport interface SettingsConfig {\n  musicEnabled: boolean;\n  soundEffectsEnabled: boolean;\n  spawnCount: number;\n  musicVolume: number;\n  effectsVolume: number;\n}\n\nexport class Settings {\n  private parentElement: HTMLElement;\n  private container: HTMLDivElement | null = null;\n  private audioService: AudioService;\n  private onClose?: () => void;\n  private onApply?: (config: SettingsConfig) => void;\n  private config: SettingsConfig;\n\n  constructor(\n    parentElement: HTMLElement,\n    audioService: AudioService,\n    initialConfig: SettingsConfig,\n    callbacks: {\n      onClose?: () => void;\n      onApply?: (config: SettingsConfig) => void;\n    }\n  ) {\n    this.parentElement = parentElement;\n    this.audioService = audioService;\n    this.config = { ...initialConfig };\n    this.onClose = callbacks.onClose;\n    this.onApply = callbacks.onApply;\n  }\n\n  show(): void {\n    if (this.container) return;\n\n    this.container = createElement('div', {\n      id: 'settingsMenu',\n      styles: {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        backgroundColor: 'rgba(0, 0, 0, 0.95)',\n        padding: '3rem',\n        borderRadius: '1rem',\n        zIndex: '2000',\n        minWidth: '400px',\n        maxWidth: '500px',\n        border: '2px solid rgba(255, 255, 255, 0.3)',\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.8)',\n      },\n    });\n\n    // Title\n    const title = createElement('h2', {\n      textContent: 'Settings',\n      styles: {\n        color: '#fff',\n        marginBottom: '2rem',\n        fontSize: '2rem',\n        textAlign: 'center',\n        borderBottom: '2px solid rgba(255, 255, 255, 0.2)',\n        paddingBottom: '1rem',\n      },\n    });\n    this.container.appendChild(title);\n\n    // Audio Section\n    const audioSection = this.createSection('Audio Settings');\n    this.container.appendChild(audioSection);\n\n    // Music Toggle\n    const musicToggle = this.createToggle(\n      'Background Music',\n      this.config.musicEnabled,\n      (enabled) => {\n        this.config.musicEnabled = enabled;\n        if (enabled) {\n          this.audioService.unmute();\n        } else {\n          this.audioService.mute();\n        }\n      }\n    );\n    audioSection.appendChild(musicToggle);\n\n    // Sound Effects Toggle\n    const sfxToggle = this.createToggle(\n      'Sound Effects',\n      this.config.soundEffectsEnabled,\n      (enabled) => {\n        this.config.soundEffectsEnabled = enabled;\n        this.audioService.setEffectsEnabled(enabled);\n      }\n    );\n    audioSection.appendChild(sfxToggle);\n\n    // Music Volume Slider\n    const musicVolumeSlider = this.createSlider(\n      'Music Volume',\n      Math.round(this.config.musicVolume * 100),\n      0,\n      100,\n      5,\n      (value) => {\n        this.config.musicVolume = value / 100;\n        this.audioService.setBackgroundVolume(this.config.musicVolume);\n      }\n    );\n    audioSection.appendChild(musicVolumeSlider);\n\n    // Effects Volume Slider\n    const effectsVolumeSlider = this.createSlider(\n      'Effects Volume',\n      Math.round(this.config.effectsVolume * 100),\n      0,\n      100,\n      5,\n      (value) => {\n        this.config.effectsVolume = value / 100;\n        this.audioService.setEffectsVolume(this.config.effectsVolume);\n      }\n    );\n    audioSection.appendChild(effectsVolumeSlider);\n\n    // Game Settings Section\n    const gameSection = this.createSection('Game Settings');\n    this.container.appendChild(gameSection);\n\n    // Spawn Count Slider\n    const spawnSlider = this.createSlider(\n      'Characters Per Wave',\n      this.config.spawnCount,\n      4,\n      12,\n      1,\n      (value) => {\n        this.config.spawnCount = value;\n      }\n    );\n    gameSection.appendChild(spawnSlider);\n\n    // Buttons Container\n    const buttonsContainer = createElement('div', {\n      styles: {\n        display: 'flex',\n        gap: '1rem',\n        marginTop: '2rem',\n      },\n    });\n\n    const applyButton = createElement('button', {\n      textContent: 'Apply',\n      styles: {\n        flex: '1',\n        padding: '1rem',\n        fontSize: '1rem',\n        backgroundColor: '#27ae60',\n        color: '#fff',\n        border: 'none',\n        borderRadius: '5px',\n        cursor: 'pointer',\n        fontWeight: 'bold',\n      },\n    });\n    applyButton.addEventListener('click', () => {\n      this.hide();\n      this.onApply?.(this.config);\n    });\n    applyButton.addEventListener('mouseenter', () => {\n      applyButton.style.backgroundColor = '#2ecc71';\n    });\n    applyButton.addEventListener('mouseleave', () => {\n      applyButton.style.backgroundColor = '#27ae60';\n    });\n\n    const closeButton = createElement('button', {\n      textContent: 'Close',\n      styles: {\n        flex: '1',\n        padding: '1rem',\n        fontSize: '1rem',\n        backgroundColor: 'transparent',\n        color: '#fff',\n        border: '2px solid #fff',\n        borderRadius: '5px',\n        cursor: 'pointer',\n      },\n    });\n    closeButton.addEventListener('click', () => {\n      this.hide();\n      this.onClose?.();\n    });\n    closeButton.addEventListener('mouseenter', () => {\n      closeButton.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';\n    });\n    closeButton.addEventListener('mouseleave', () => {\n      closeButton.style.backgroundColor = 'transparent';\n    });\n\n    buttonsContainer.appendChild(applyButton);\n    buttonsContainer.appendChild(closeButton);\n    this.container.appendChild(buttonsContainer);\n\n    this.parentElement.appendChild(this.container);\n  }\n\n  private createSection(title: string): HTMLDivElement {\n    const section = createElement('div', {\n      styles: {\n        marginBottom: '1.5rem',\n      },\n    });\n\n    const sectionTitle = createElement('h3', {\n      textContent: title,\n      styles: {\n        color: '#fff',\n        fontSize: '1.2rem',\n        marginBottom: '1rem',\n        opacity: '0.8',\n      },\n    });\n    section.appendChild(sectionTitle);\n\n    return section;\n  }\n\n  private createToggle(\n    label: string,\n    initialValue: boolean,\n    onChange: (value: boolean) => void\n  ): HTMLDivElement {\n    const container = createElement('div', {\n      styles: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '1rem',\n        padding: '0.5rem',\n      },\n    });\n\n    const labelElement = createElement('label', {\n      textContent: label,\n      styles: {\n        color: '#fff',\n        fontSize: '1rem',\n      },\n    });\n\n    const toggleButton = createElement('button', {\n      textContent: initialValue ? 'ON' : 'OFF',\n      styles: {\n        padding: '0.5rem 1.5rem',\n        fontSize: '0.9rem',\n        backgroundColor: initialValue ? '#27ae60' : '#e74c3c',\n        color: '#fff',\n        border: 'none',\n        borderRadius: '5px',\n        cursor: 'pointer',\n        minWidth: '70px',\n        fontWeight: 'bold',\n      },\n    });\n\n    toggleButton.addEventListener('click', () => {\n      const newValue = toggleButton.textContent === 'OFF';\n      toggleButton.textContent = newValue ? 'ON' : 'OFF';\n      toggleButton.style.backgroundColor = newValue ? '#27ae60' : '#e74c3c';\n      onChange(newValue);\n    });\n\n    container.appendChild(labelElement);\n    container.appendChild(toggleButton);\n\n    return container;\n  }\n\n  private createSlider(\n    label: string,\n    initialValue: number,\n    min: number,\n    max: number,\n    step: number,\n    onChange: (value: number) => void\n  ): HTMLDivElement {\n    const container = createElement('div', {\n      styles: {\n        marginBottom: '1rem',\n        padding: '0.5rem',\n      },\n    });\n\n    const labelContainer = createElement('div', {\n      styles: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '0.5rem',\n      },\n    });\n\n    const labelElement = createElement('label', {\n      textContent: label,\n      styles: {\n        color: '#fff',\n        fontSize: '1rem',\n      },\n    });\n\n    const valueDisplay = createElement('span', {\n      textContent: String(initialValue),\n      styles: {\n        color: '#27ae60',\n        fontSize: '1rem',\n        fontWeight: 'bold',\n        minWidth: '30px',\n        textAlign: 'right',\n      },\n    });\n\n    labelContainer.appendChild(labelElement);\n    labelContainer.appendChild(valueDisplay);\n\n    const slider = document.createElement('input');\n    slider.type = 'range';\n    slider.min = String(min);\n    slider.max = String(max);\n    slider.step = String(step);\n    slider.value = String(initialValue);\n    slider.style.width = '100%';\n    slider.style.cursor = 'pointer';\n\n    slider.addEventListener('input', () => {\n      const value = parseInt(slider.value);\n      valueDisplay.textContent = String(value);\n      onChange(value);\n    });\n\n    container.appendChild(labelContainer);\n    container.appendChild(slider);\n\n    return container;\n  }\n\n  hide(): void {\n    if (this.container) {\n      this.container.remove();\n      this.container = null;\n    }\n  }\n\n  isVisible(): boolean {\n    return this.container !== null;\n  }\n\n  updateConfig(config: SettingsConfig): void {\n    this.config = { ...config };\n  }\n}\n","export class ParticleEffect {\n  private particles: HTMLElement[] = [];\n  private container: HTMLElement;\n\n  constructor(container: HTMLElement) {\n    this.container = container;\n  }\n\n  createClickEffect(x: number, y: number, type: 'good' | 'bad' | 'special'): void {\n    const colors = {\n      good: ['#27ae60', '#2ecc71', '#3498db'],\n      bad: ['#e74c3c', '#c0392b', '#e67e22'],\n      special: ['#f39c12', '#f1c40f', '#e67e22', '#ffd700'],\n    };\n\n    const particleCount = type === 'special' ? 20 : 12;\n    const particleColors = colors[type];\n\n    for (let i = 0; i < particleCount; i++) {\n      const particle = document.createElement('div');\n      particle.className = 'particle';\n      \n      const angle = (Math.PI * 2 * i) / particleCount;\n      const velocity = 50 + Math.random() * 50;\n      const size = type === 'special' ? 8 + Math.random() * 4 : 4 + Math.random() * 4;\n      const color = particleColors[Math.floor(Math.random() * particleColors.length)];\n      \n      particle.style.cssText = `\n        position: absolute;\n        left: ${x}px;\n        top: ${y}px;\n        width: ${size}px;\n        height: ${size}px;\n        background: ${color};\n        border-radius: 50%;\n        pointer-events: none;\n        z-index: 1000;\n        box-shadow: 0 0 10px ${color};\n      `;\n\n      this.container.appendChild(particle);\n      this.particles.push(particle);\n\n      const dx = Math.cos(angle) * velocity;\n      const dy = Math.sin(angle) * velocity;\n\n      this.animateParticle(particle, x, y, dx, dy);\n    }\n  }\n\n  private animateParticle(\n    particle: HTMLElement,\n    startX: number,\n    startY: number,\n    dx: number,\n    dy: number\n  ): void {\n    let frame = 0;\n    const maxFrames = 60;\n\n    const animate = () => {\n      frame++;\n      const progress = frame / maxFrames;\n      \n      const currentX = startX + dx * progress;\n      const currentY = startY + dy * progress + (progress * progress * 100);\n      const opacity = 1 - progress;\n      const scale = 1 - progress * 0.5;\n\n      particle.style.left = `${currentX}px`;\n      particle.style.top = `${currentY}px`;\n      particle.style.opacity = `${opacity}`;\n      particle.style.transform = `scale(${scale})`;\n\n      if (frame < maxFrames) {\n        requestAnimationFrame(animate);\n      } else {\n        particle.remove();\n        const index = this.particles.indexOf(particle);\n        if (index > -1) {\n          this.particles.splice(index, 1);\n        }\n      }\n    };\n\n    requestAnimationFrame(animate);\n  }\n\n  createScorePopup(x: number, y: number, score: number, isPositive: boolean): void {\n    const popup = document.createElement('div');\n    popup.className = 'score-popup';\n    popup.textContent = `${isPositive ? '+' : ''}${score}`;\n    \n    popup.style.cssText = `\n      position: absolute;\n      left: ${x}px;\n      top: ${y}px;\n      font-size: 2rem;\n      font-weight: bold;\n      color: ${isPositive ? '#27ae60' : '#e74c3c'};\n      text-shadow: 0 0 10px ${isPositive ? '#27ae60' : '#e74c3c'};\n      pointer-events: none;\n      z-index: 1000;\n      animation: scoreFloat 1s ease-out forwards;\n    `;\n\n    this.container.appendChild(popup);\n\n    setTimeout(() => {\n      popup.remove();\n    }, 1000);\n  }\n\n  cleanup(): void {\n    this.particles.forEach(particle => particle.remove());\n    this.particles = [];\n  }\n}\n\n// Add CSS animations for particles\nconst style = document.createElement('style');\nstyle.textContent = `\n  @keyframes scoreFloat {\n    0% {\n      opacity: 1;\n      transform: translateY(0) scale(0.5);\n    }\n    50% {\n      opacity: 1;\n      transform: translateY(-30px) scale(1.2);\n    }\n    100% {\n      opacity: 0;\n      transform: translateY(-60px) scale(0.8);\n    }\n  }\n\n  .particle {\n    transition: opacity 0.3s ease;\n  }\n`;\ndocument.head.appendChild(style);\n","import { GameStateManager } from './GameState';\nimport { EventManager } from './EventManager';\nimport { AudioService } from '@/services/AudioService';\nimport { FirebaseService } from '@/services/FirebaseService';\nimport { StorageService } from '@/services/StorageService';\nimport { Visitor } from '@/entities/Visitor';\nimport { Hotel } from '@/entities/Hotel';\nimport { HUD } from '@/ui/HUD';\nimport { Menu } from '@/ui/Menu';\nimport { Instructions } from '@/ui/Instructions';\nimport { GameOver, GameOverType } from '@/ui/GameOver';\nimport { Leaderboard } from '@/ui/Leaderboard';\nimport { PauseMenu } from '@/ui/PauseMenu';\nimport { Settings, SettingsConfig } from '@/ui/Settings';\nimport { GAME_CONFIG, SCORE_VALUES, HEALTH_VALUES, KEYBOARD_CONTROLS } from '@/utils/constants';\nimport { ParticleEffect } from '@/utils/particles';\n\nexport class Game {\n  private gameState: GameStateManager;\n  private eventManager: EventManager;\n  private audioService: AudioService;\n  private firebaseService: FirebaseService;\n  private storageService: StorageService;\n\n  private parentElement: HTMLElement;\n  private visitors: Visitor[] = [];\n  private hotel: Hotel | null = null;\n  private hud: HUD | null = null;\n  private particleEffect: ParticleEffect;\n\n  private menu: Menu;\n  private instructions: Instructions;\n  private gameOver: GameOver;\n  private leaderboard: Leaderboard;\n  private pauseMenu: PauseMenu;\n  private settings: Settings;\n  private settingsConfig: SettingsConfig = {\n    musicEnabled: true,\n    soundEffectsEnabled: true,\n    spawnCount: 8,\n    musicVolume: 0.3,\n    effectsVolume: 1.0,\n  };\n\n  private visitorSpawnInterval: number | null = null;\n  private visitorCleanupTimeout: number | null = null;\n  private darkModeInterval: number | null = null;\n  private darkModeTimeout: number | null = null;\n  private cycleInterval: number | null = null;\n\n  constructor(parentElement: HTMLElement) {\n    this.parentElement = parentElement;\n    this.gameState = new GameStateManager();\n    this.eventManager = new EventManager();\n    this.audioService = new AudioService();\n    this.firebaseService = new FirebaseService();\n    this.storageService = new StorageService();\n    this.particleEffect = new ParticleEffect(parentElement);\n\n    this.menu = new Menu(parentElement, {\n      onStart: (userName) => this.startGame(userName),\n      onInstructions: () => this.showInstructions(),\n      onShowLeaderboard: () => this.showLeaderboardFromMenu(),\n    });\n\n    this.instructions = new Instructions(parentElement, {\n      onBack: () => this.showMenu(),\n    });\n\n    this.gameOver = new GameOver(parentElement, {\n      onRestart: () => this.restart(),\n      onShowLeaderboard: () => this.showLeaderboard(),\n    });\n\n    this.leaderboard = new Leaderboard(parentElement, {\n      onBack: () => this.restart(),\n    });\n\n    this.pauseMenu = new PauseMenu(parentElement, {\n      onResume: () => this.resumeGame(),\n      onRestart: () => this.restart(),\n      onSettings: () => this.showSettings(),\n    });\n\n    this.settings = new Settings(parentElement, this.audioService, this.settingsConfig, {\n      onClose: () => this.resumeGame(),\n      onApply: (config) => this.applySettings(config),\n    });\n\n    this.setupKeyboardControls();\n    this.showMenu();\n  }\n\n  private setupKeyboardControls(): void {\n    document.addEventListener('keydown', (event) => {\n      if (this.gameState.getState() === 'playing') {\n        if (event.key === KEYBOARD_CONTROLS.PAUSE || event.key === KEYBOARD_CONTROLS.ESCAPE) {\n          event.preventDefault();\n          this.pauseGame();\n        } else if (event.key === KEYBOARD_CONTROLS.MUTE) {\n          event.preventDefault();\n          this.audioService.toggleMute();\n        }\n      } else if (this.gameState.getState() === 'paused') {\n        if (event.key === KEYBOARD_CONTROLS.PAUSE || event.key === KEYBOARD_CONTROLS.ESCAPE) {\n          event.preventDefault();\n          this.resumeGame();\n        } else if (event.key === KEYBOARD_CONTROLS.RESTART) {\n          event.preventDefault();\n          this.restart();\n        }\n      }\n    });\n  }\n\n  private showMenu(): void {\n    this.cleanup();\n    this.gameState.setState('menu');\n    this.menu.show();\n  }\n\n  private showInstructions(): void {\n    this.instructions.show();\n  }\n\n  private async startGame(userName: string): Promise<void> {\n    this.gameState.setUserName(userName);\n    this.gameState.setState('playing');\n    this.menu.hide();\n\n    this.parentElement.style.backgroundImage = \"url('/images/bcg.jpg')\";\n\n    this.hotel = new Hotel(this.parentElement);\n    this.hud = new HUD(this.parentElement);\n\n    this.updateHUD();\n    this.audioService.play('background');\n\n    this.startVisitorCycle();\n  }\n\n  private startVisitorCycle(): void {\n    const spawnAndClean = () => {\n      this.spawnVisitors();\n\n      this.visitorCleanupTimeout = window.setTimeout(() => {\n        this.cleanupVisitors();\n      }, GAME_CONFIG.visitorLifetime);\n    };\n\n    spawnAndClean();\n    this.visitorSpawnInterval = window.setInterval(spawnAndClean, GAME_CONFIG.visitorSpawnInterval);\n\n    this.darkModeTimeout = window.setTimeout(() => {\n      this.toggleDarkMode();\n    }, GAME_CONFIG.darkModeDuration);\n\n    this.cycleInterval = window.setInterval(() => {\n      spawnAndClean();\n      this.darkModeTimeout = window.setTimeout(() => {\n        this.toggleDarkMode();\n      }, GAME_CONFIG.darkModeDuration);\n    }, GAME_CONFIG.darkModeInterval);\n  }\n\n  private spawnVisitors(): void {\n    const spawnCount = this.settingsConfig.spawnCount;\n    for (let i = 0; i < spawnCount; i++) {\n      const visitor = new Visitor(this.gameState.hasTheRing());\n      this.visitors.push(visitor);\n      this.parentElement.appendChild(visitor.domElement);\n\n      visitor.domElement.addEventListener('pointerdown', (e) => {\n        e.preventDefault();\n        this.handleVisitorClick(visitor);\n      });\n      visitor.domElement.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          this.handleVisitorClick(visitor);\n        }\n      });\n    }\n  }\n\n  private cleanupVisitors(): void {\n    this.visitors.forEach((visitor) => visitor.destroy());\n    this.visitors = [];\n  }\n\n  private toggleDarkMode(): void {\n    const isDark = !this.gameState.isDarkModeActive();\n    this.gameState.setDarkMode(isDark);\n\n    this.parentElement.style.backgroundImage = isDark\n      ? \"url('/images/dark-bcg.jpg')\"\n      : \"url('/images/bcg.jpg')\";\n\n    if (isDark) {\n      this.darkModeTimeout = window.setTimeout(() => {\n        this.toggleDarkMode();\n      }, GAME_CONFIG.darkModeDuration);\n    }\n  }\n\n  private handleVisitorClick(visitor: Visitor): void {\n    if (this.gameState.getState() !== 'playing') return;\n\n    const isDark = this.gameState.isDarkModeActive();\n    const rect = visitor.domElement.getBoundingClientRect();\n    const x = rect.left + rect.width / 2;\n    const y = rect.top + rect.height / 2;\n\n    if (isDark) {\n      this.handleVisitorClickEvil(visitor);\n    } else {\n      this.handleVisitorClickGood(visitor);\n    }\n    const type = visitor.type;\n    if (type === 'gandalf' || type === 'sauron' || type === 'ring') {\n      this.particleEffect.createClickEffect(x, y, 'special');\n    } else if (\n      ((type === 'human' || type === 'elf') && !isDark) ||\n      ((type === 'org' || type === 'goblin') && isDark)\n    ) {\n      this.particleEffect.createClickEffect(x, y, 'good');\n    } else {\n      this.particleEffect.createClickEffect(x, y, 'bad');\n    }\n\n    visitor.startMoving(isDark);\n    this.updateHUD();\n    this.checkGameEnd();\n  }\n\n  private handleVisitorClickGood(visitor: Visitor): void {\n    const type = visitor.type;\n\n    if (type === 'human' || type === 'elf') {\n      this.gameState.addScore(SCORE_VALUES.goodVisitor);\n      this.audioService.play('good');\n    } else if (type === 'org' || type === 'goblin') {\n      this.gameState.addScore(SCORE_VALUES.badVisitor);\n      this.gameState.addHealth(HEALTH_VALUES.badVisitor);\n      this.audioService.play('bad');\n    } else if (type === 'gandalf' && this.gameState.getGoodWins().includes('ring')) {\n      this.audioService.play('gandalf');\n      this.gameState.addScore(SCORE_VALUES.specialCharacter);\n      this.gameState.addGoodWin('gandalf');\n      this.endGame('gandalf');\n    } else if (type === 'ring' && this.gameState.getGoodWins().length === 0) {\n      this.audioService.play('ring');\n      this.gameState.setCurrentSide('good');\n      this.gameState.addGoodWin('ring');\n      this.gameState.setRing(true);\n      this.hud?.showInfo('You captured the Ring. Find Gandalf to destroy it.');\n    } else if (type === 'gollum' && this.gameState.getGoodWins().includes('ring')) {\n      this.gameState.removeGoodWin('ring');\n      this.gameState.setRing(false);\n      this.audioService.play('gollum');\n      this.hud?.showInfo('Gollum stole your Ring!');\n    } else if (type === 'gollum' && this.gameState.getDarkWins().includes('ring')) {\n      this.gameState.removeDarkWin('ring');\n      this.gameState.setRing(false);\n      this.audioService.play('gollum');\n      this.hud?.showInfo('Gollum stole your Ring!');\n    } else if (type === 'sauron') {\n      this.audioService.play('sauron');\n      this.gameState.addScore(SCORE_VALUES.specialCharacterPenalty);\n      this.gameState.addHealth(HEALTH_VALUES.specialCharacter);\n      this.hud?.showInfo('The power of Sauron is limited on this side.');\n    } else if (type === 'gandalf' && !this.gameState.getGoodWins().includes('ring')) {\n      this.audioService.play('gandalf');\n      this.hud?.showInfo('You should find the Ring before Gandalf!');\n    } else if (type === 'gollum') {\n      this.hud?.showInfo(\"You don't have the Ring, Gollum run away.\");\n    }\n  }\n\n  private handleVisitorClickEvil(visitor: Visitor): void {\n    const type = visitor.type;\n\n    if (type === 'org' || type === 'goblin') {\n      this.gameState.addScore(SCORE_VALUES.goodVisitor);\n      this.audioService.play('bad');\n    } else if (type === 'human' || type === 'elf') {\n      this.gameState.addScore(SCORE_VALUES.badVisitor);\n      this.gameState.addHealth(HEALTH_VALUES.badVisitor);\n      this.audioService.play('good');\n    } else if (type === 'sauron' && this.gameState.getDarkWins().includes('ring')) {\n      this.audioService.play('sauron');\n      this.gameState.addScore(SCORE_VALUES.specialCharacter);\n      this.gameState.addDarkWin('sauron');\n      this.endGame('sauron');\n    } else if (type === 'ring' && this.gameState.getDarkWins().length === 0) {\n      this.audioService.play('ring');\n      this.gameState.setCurrentSide('evil');\n      this.gameState.addDarkWin('ring');\n      this.gameState.setRing(true);\n      this.hud?.showInfo('You captured the Ring. Find Sauron to rule the Middle Earth!');\n    } else if (type === 'gollum' && this.gameState.getDarkWins().includes('ring')) {\n      this.gameState.removeDarkWin('ring');\n      this.gameState.setRing(false);\n      this.audioService.play('gollum');\n      this.hud?.showInfo('Gollum stole your Ring!');\n    } else if (type === 'gollum' && this.gameState.getGoodWins().includes('ring')) {\n      this.gameState.removeGoodWin('ring');\n      this.gameState.setRing(false);\n      this.audioService.play('gollum');\n      this.hud?.showInfo('Gollum stole your Ring!');\n    } else if (type === 'gandalf') {\n      this.audioService.play('gandalf');\n      this.gameState.addScore(SCORE_VALUES.specialCharacterPenalty);\n      this.gameState.addHealth(HEALTH_VALUES.specialCharacter);\n      this.hud?.showInfo('The power of Gandalf is limited on this side.');\n    } else if (type === 'sauron' && !this.gameState.getDarkWins().includes('ring')) {\n      this.audioService.play('sauron');\n      this.hud?.showInfo('You should find the Ring before Sauron!');\n    } else if (type === 'gollum') {\n      this.hud?.showInfo(\"You don't have the Ring, Gollum run away.\");\n    }\n  }\n\n  private updateHUD(): void {\n    if (!this.hud) return;\n\n    this.hud.updateScore(this.gameState.getScore());\n    this.hud.updateHealth(this.gameState.getHealth());\n    this.hud.updateRing(this.gameState.hasTheRing(), this.gameState.isDarkModeActive(), () => {\n      const side = this.gameState.getCurrentSide();\n      const message =\n        side === 'good'\n          ? 'The ring is captured by Minas Tirith, find Gandalf'\n          : 'The ring is captured by Mordor, find Sauron';\n      this.hud?.showInfo(message);\n    });\n  }\n\n  private checkGameEnd(): void {\n    if (this.gameState.getHealth() <= 0) {\n      this.endGame('defeat');\n    }\n  }\n\n  private async endGame(type: GameOverType): Promise<void> {\n    this.gameState.setState('gameOver');\n    this.stopAllIntervals();\n    this.cleanupVisitors();\n    this.audioService.stop('background');\n\n    await this.firebaseService.saveScore({\n      userName: this.gameState.getUserName(),\n      score: this.gameState.getScore(),\n    });\n\n    this.storageService.saveHighScore(this.gameState.getScore());\n\n    this.gameOver.show(type, this.gameState.getUserName(), this.gameState.getScore());\n  }\n\n  private pauseGame(): void {\n    if (this.gameState.getState() !== 'playing') return;\n\n    this.gameState.setState('paused');\n    this.stopAllIntervals();\n    this.audioService.stop('background');\n    this.pauseMenu.show();\n  }\n\n  private resumeGame(): void {\n    if (this.gameState.getState() !== 'paused') return;\n\n    this.gameState.setState('playing');\n    this.audioService.play('background');\n    this.pauseMenu.hide();\n    this.startVisitorCycle();\n\n    if (document.fullscreenElement === null) {\n      this.parentElement.requestFullscreen().catch((err) => {\n        console.warn('Could not enter fullscreen:', err);\n      });\n    }\n  }\n\n  private showSettings(): void {\n    this.settings.show();\n  }\n\n  private applySettings(config: SettingsConfig): void {\n    this.settingsConfig = { ...config };\n\n    if (!config.musicEnabled) {\n      this.audioService.mute();\n    } else {\n      this.audioService.unmute();\n    }\n\n    this.audioService.setEffectsEnabled(config.soundEffectsEnabled);\n    this.audioService.setBackgroundVolume(config.musicVolume);\n    this.audioService.setEffectsVolume(config.effectsVolume);\n\n    this.hud?.showInfo(\n      `Settings applied! Spawning ${config.spawnCount} characters per wave.`,\n      2000\n    );\n\n    this.resumeGame();\n  }\n\n  private async showLeaderboard(): Promise<void> {\n    const scores = await this.firebaseService.getTopScores(10);\n    this.leaderboard.show(scores);\n  }\n\n  private async showLeaderboardFromMenu(): Promise<void> {\n    const scores = await this.firebaseService.getTopScores(10);\n    this.leaderboard.show(scores, () => this.showMenu());\n  }\n\n  private restart(): void {\n    this.cleanup();\n    this.gameState.reset();\n    window.location.reload();\n  }\n\n  private stopAllIntervals(): void {\n    if (this.visitorSpawnInterval) {\n      clearInterval(this.visitorSpawnInterval);\n      this.visitorSpawnInterval = null;\n    }\n    if (this.visitorCleanupTimeout) {\n      clearTimeout(this.visitorCleanupTimeout);\n      this.visitorCleanupTimeout = null;\n    }\n    if (this.darkModeInterval) {\n      clearInterval(this.darkModeInterval);\n      this.darkModeInterval = null;\n    }\n    if (this.darkModeTimeout) {\n      clearTimeout(this.darkModeTimeout);\n      this.darkModeTimeout = null;\n    }\n    if (this.cycleInterval) {\n      clearInterval(this.cycleInterval);\n      this.cycleInterval = null;\n    }\n  }\n\n  private cleanup(): void {\n    this.stopAllIntervals();\n    this.cleanupVisitors();\n    this.hotel?.destroy();\n    this.hud?.destroy();\n    this.pauseMenu.hide();\n    this.particleEffect.cleanup();\n    this.hotel = null;\n    this.hud = null;\n  }\n\n  destroy(): void {\n    this.cleanup();\n    this.audioService.cleanup();\n    this.eventManager.clear();\n  }\n}\n","import { Game } from '@/core/Game';\nimport './styles/main.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const setViewportHeightVar = () => {\n    const vh = window.innerHeight * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  };\n\n  setViewportHeightVar();\n  window.addEventListener('resize', setViewportHeightVar);\n  window.addEventListener('orientationchange', setViewportHeightVar);\n\n  const boardElement = document.getElementById('board');\n\n  if (!boardElement) {\n    console.error('Board element not found!');\n    return;\n  }\n\n  const game = new Game(boardElement);\n\n  if (import.meta.env.DEV) {\n    (window as unknown as Window & { game?: Game }).game = game;\n  }\n});\n"],"names":["GAME_CONFIG","VISITOR_IMAGES","HOTEL_IMAGES","AUDIO_FILES","SCORE_VALUES","HEALTH_VALUES","KEYBOARD_CONTROLS","GameStateManager","__publicField","state","points","health","amount","name","has","side","active","type","item","index","EventManager","event","callback","callbacks","args","AudioService","key","src","audio","soundName","error","volume","bgAudio","enabled","config","FirebaseService","firebaseConfig","initializeApp","getFirestore","playerScore","scoreData","addDoc","collection","topN","scoresQuery","query","orderBy","limit","querySnapshot","getDocs","scores","doc","data","STORAGE_KEYS","StorageService","test","settings","score","currentHigh","shown","randomInt","min","max","createElement","tag","options","element","value","requestFullscreen","Visitor","hasRing","randomUniqueNumber","randomNumber","img","isDarkMode","positions","animate","dx","dy","Hotel","parentElement","container","id","left","right","HUD","display","heartImg","_isDarkMode","onClick","ringImg","e","message","duration","info","Menu","form","instructionsButton","topScoresButton","userName","Instructions","backButton","GameOver","gameOverGif","showPlayersButton","restartDiv","playersButton","handleKeyPress","Leaderboard","onBackOverride","title","playerList","emptyMessage","listItem","backHandler","PauseMenu","buttonStyle","resumeButton","restartButton","settingsButton","Settings","audioService","initialConfig","audioSection","musicToggle","sfxToggle","musicVolumeSlider","effectsVolumeSlider","gameSection","spawnSlider","buttonsContainer","applyButton","closeButton","section","sectionTitle","label","initialValue","onChange","labelElement","toggleButton","newValue","step","labelContainer","valueDisplay","slider","ParticleEffect","x","y","colors","particleCount","particleColors","i","particle","angle","velocity","size","color","startX","startY","frame","maxFrames","progress","currentX","currentY","opacity","scale","isPositive","popup","style","Game","spawnAndClean","spawnCount","visitor","isDark","rect","err","setViewportHeightVar","vh","boardElement"],"mappings":"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"}